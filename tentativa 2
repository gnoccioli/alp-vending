#include<iostream>

#define lin 2
#define col 3

using namespace std;

void menu_principal(int i, int j, int produtos[lin][col]);
void menu_compra(int i, int j, int produtos[lin][col], int escolha);
void efetiva_compra(int i, int j, int produtos[lin][col], int escolha_confirma);

void menu_adm(int i, int j, int produtos[lin][col]);
void inserir_valores_adm(int i, int j, int produtos[lin][col]);
void lista_produtos_adm(int i, int j, int produtos[lin][col]);

int main()
{
	int i, j;
	int produtos[lin][col];
	
	menu_principal(i, j, produtos);
	
	system("pause");
	return 0;
}

void menu_principal(int i, int j, int produtos[lin][col])
{
	int escolha;
	do
	{
		system("cls");
		cout << "\t\tBem vindo!" << endl;
		cout << "\t* * * LISTA DE PRODUTOS * * *" << endl;
		cout << "\t\t#Produto *  Valor" << endl;	
		
			for(i=0; i<1; i++)
				for (j=0; j<col; j++)
				{
					cout << "\t\t#" << j+1 << " * R$ " << produtos[i][j] << endl;
				}
				
		cout << "Digite o produto desejado:";
		cin >> escolha;
		if (escolha >= 1 && escolha <9)
			menu_compra(i, j, produtos, escolha);
		if (escolha == 9)
			menu_adm(i, j, produtos);
			cout << "sem menu" << endl;
	}while (escolha != 0);
	system("cls");
	cout << "Obrigado e volte sempre.";
	
}
void menu_compra(int i, int j, int produtos[lin][col], int escolha)
{
	system("cls");
	int escolha_confirma;
	int escolha_produtos;
		
	cout << "Confirme a sa escolha:";
	cin >> escolha_confirma;
	
	if(escolha_confirma != escolha)
	{
		cout << endl << endl << "A confirmacao da opcao nao bate com a primeira opcao! Refaca a escolha." << endl << endl;
		system("pause");
		menu_principal(i, j, produtos);
		system("pause");
	}
	else
		efetiva_compra(i, j, produtos, escolha_produtos);
	system("pause");
}

void efetiva_compra(int i, int j, int produtos[lin][col], int escolha_confirma)
{
	double valor_produto, valor_inserido, valor_troco;
	char resposta;
	
	do
	{
		system("cls");
		for(i=0; i<lin; i++)
			for(j=0; j<col; j++)
				{
					if (escolha_confirma == produtos[i][col])
						valor_produto = produtos[i][j];
				}
				
		cout << "O valor do produto " << i << "e de R$" << valor_produto << "." << endl;
		cout << "Insira dinheiro (valor): ";
		cin >> valor_inserido;
		
		if (valor_inserido > valor_produto)
			{
				valor_troco = valor_inserido - valor_produto;
				cout << "O valor do produto e R$" << valor_produto << " e o valor inserido e R$" << valor_inserido << "." << endl << "* * Seu troco e de R$" << valor_troco << ". * *" << endl;
				cout << "Retire o produto e o seu troco abaixo" << endl;
			}
		else
			cout << "O valor inserido e inferior ao valor do produto, deseja continuar comprando?" << endl << "[S] - SIM;" << endl << "[N] - NAO;" << endl << "R:";
			cin >> resposta;
			
	}while (resposta != 'N' || resposta == 'S');
	cout << "Obrigado pela preferencia, volte sempre!" << endl;
	system("pause");
	menu_principal(i, j, produtos);
}

void menu_adm(int i, int j, int produtos[lin][col])
{
	int op_adm;
	
	system("cls");
	do
	{
		system("cls");
		cout << "* * * MENU ADMINISTRADOR * * *" << endl;
		cout << "[1] - Inserir valores e quantidades;" << endl << "[2] - Imprimir lista de produtos com valores e quantidades" << endl << "[3] - Voltar ao sistema usuario;" << endl;
		cin >> op_adm;
		
		switch(op_adm)
		{
			case 1:
				inserir_valores_adm(i, j, produtos);
				break;
			case 2:
				lista_produtos_adm(i, j, produtos);
				break;
			case 3:
				menu_principal(i, j, produtos);
				break;				
		}
	}while(op_adm != 3);
}

void inserir_valores_adm(int i, int j, int produtos[lin][col])
{
	system("cls");
		//inserir valor
	for (i=0; i<1; i++)
		for(j=0; j<col; j++)
			{
				cout << "Insira o preco produto: " << j+1 << ":" << endl;
				cin >> produtos[i][j];
			}
			
	//inserir quantidade
	for (i=1; i<2; i++)
		for(j=0; j<col; j++)
			{
				cout << "Insira a quantidade do produto: " << j+1 << ":" << endl;
				cin >> produtos[i][j];
			}
}

void lista_produtos_adm(int i, int j, int produtos[lin][col])
{
	system("cls");
	
	cout << "\t* * * LISTA DE PRODUTOS * * *" << endl;
	cout << "\t#Produto *  Valor - Quantidade" << endl;	
	
		for (j=0; j<col; j++)
		{
		cout << endl;
		for(i=0; i<lin; i++)
			{
				if (i<1)
					cout << "\t\t#" << j+1 << " * R$ " << produtos[i][j] << " -- ";
				else
					cout << produtos[i][j];
			}
	}
	cout << endl;
	system("pause");
}



